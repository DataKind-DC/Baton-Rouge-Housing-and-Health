<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cook County Veterans, Economic Security & Housing</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Mapbox GL JS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    
    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
   
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <div class="d-flex align-items-center">
                <div class="logo-placeholder">
                    <img src="assets/RLD.png" alt="DKDC Logo" class="logo-img">
                </div>
                <span class="navbar-brand mb-0">Cook County Veterans, Economic Security & Housing</span>
            </div>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="about.html" style="color: #1F2052 !important; font-weight: 500;">About the Data</a>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <div class="left-sidebar">
            <!-- Control Buttons -->
            <div class="controls-section">
                <div class="control-buttons">
                    <button id="toggle-layer-controls" class="control-btn">
                        Choose Map Layer
                    </button>
                    <button id="toggle-xaxis-controls" class="control-btn">
                        Choose x-axis variable
                    </button>
                    <button id="toggle-scatterplots" class="control-btn">
                        Show Scatterplots
                    </button>
                </div>
            </div>
            <!-- Tract Details (Now at Top) -->
            <div class="tract-details">
                <div id="tract-info" class="tract-info">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>

            

            <!-- Scatter Plot -->
            <div class="scatter-plot-container">
                <div class="plot-header">
                    <div class="plot-subtitle" id="plot-subtitle">Total Veterans by Rank</div>
                </div>
                <div id="scatter-plot" class="scatter-plot"></div>
            </div>
        </div>

        <!-- Layer Controls Panel -->
        <div id="layer-controls-panel" class="layer-controls-panel">
            <div class="panel-header">
                <h5>Map Layer / Y-Axis</h5>
                <button id="close-layer-controls" class="close-btn">&times;</button>
            </div>
            
            <div class="three-column-container">
                <!-- Column 1: Veterans -->
                <div class="layer-column">
                    <div class="column-title">Veterans</div>

                    <div class="layer-subgroup">
                        <h6>Population</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-total" value="Vet_Total_Veterans" checked>
                            <label class="form-check-label" for="vet-total">Total Veterans</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-pct-adult" value="Pct_Veterans_Of_Adult_Pop">
                            <label class="form-check-label" for="vet-pct-adult">Veterans % of Adults</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-per-1000" value="veterans_per_1000_pop">
                            <label class="form-check-label" for="vet-per-1000">Veterans per 1,000 Pop</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Demographics</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-male" value="Pct_Veterans_Male">
                            <label class="form-check-label" for="vet-male">Male Veterans %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-female" value="Pct_Veterans_Female">
                            <label class="form-check-label" for="vet-female">Female Veterans %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Age Groups</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-18-34" value="Pct_Veterans_18_34">
                            <label class="form-check-label" for="vet-18-34">Veterans 18-34 %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-35-54" value="Pct_Veterans_35_54">
                            <label class="form-check-label" for="vet-35-54">Veterans 35-54 %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-55-64" value="Pct_Veterans_55_64">
                            <label class="form-check-label" for="vet-55-64">Veterans 55-64 %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-65-plus" value="Pct_Veterans_65_Plus">
                            <label class="form-check-label" for="vet-65-plus">Veterans 65+ %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Economic Status</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-employed" value="Pct_Veterans_Employed">
                            <label class="form-check-label" for="vet-employed">Veterans Employed %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-income" value="Vet_Median_Income_Veteran_Total">
                            <label class="form-check-label" for="vet-income">Veteran Median Income</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-poverty-18-64" value="Pct_Vet_18_64_In_Poverty">
                            <label class="form-check-label" for="vet-poverty-18-64">Veterans 18-64 in Poverty %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vet-service-disability" value="Pct_Vet_With_Service_Disability">
                            <label class="form-check-label" for="vet-service-disability">Service-Connected Disability %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Health Coverage</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="tricare" value="Pct_With_TRICARE">
                            <label class="form-check-label" for="tricare">TRICARE Coverage %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="va-health" value="Pct_With_VA_HealthCare">
                            <label class="form-check-label" for="va-health">VA Health Care %</label>
                        </div>
                    </div>
                </div>

                <!-- Column 2: Economic Security -->
                <div class="layer-column">
                    <div class="column-title">Economic Security</div>

                    <div class="layer-subgroup">
                        <h6>Income & Poverty</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="median-income" value="Median_Household_Income">
                            <label class="form-check-label" for="median-income">Median Household Income</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="poverty-pct" value="Pct_Below_Poverty">
                            <label class="form-check-label" for="poverty-pct">Below Poverty %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="low-income" value="Low_Income_Under_35K">
                            <label class="form-check-label" for="low-income">Low Income (<$35K)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="high-income" value="High_Income_100K_Plus">
                            <label class="form-check-label" for="high-income">High Income ($100K+)</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Health Insurance</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="with-insurance" value="Pct_With_Health_Insurance">
                            <label class="form-check-label" for="with-insurance">With Health Insurance %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="no-insurance" value="Pct_No_Health_Insurance">
                            <label class="form-check-label" for="no-insurance">Without Health Insurance %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="employer-insurance" value="Pct_With_Employer_Insurance">
                            <label class="form-check-label" for="employer-insurance">Employer Insurance %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="medicare" value="Pct_With_Medicare">
                            <label class="form-check-label" for="medicare">Medicare %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="medicaid" value="Pct_With_Medicaid">
                            <label class="form-check-label" for="medicaid">Medicaid %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Public Assistance</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="snap" value="Pct_HH_SNAP">
                            <label class="form-check-label" for="snap">Households on SNAP %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="public-assist" value="Pct_HH_Public_Assistance">
                            <label class="form-check-label" for="public-assist">Public Assistance %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="social-security" value="Pct_HH_With_Social_Security">
                            <label class="form-check-label" for="social-security">Social Security %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Education & Access</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="bachelors-plus" value="Pct_Bachelors_Plus">
                            <label class="form-check-label" for="bachelors-plus">Bachelor's Degree+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="less-than-hs" value="Pct_Less_Than_HS">
                            <label class="form-check-label" for="less-than-hs">Less than High School %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="disability" value="Pct_With_Disability">
                            <label class="form-check-label" for="disability">With Disability %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="broadband" value="Pct_HH_With_Broadband">
                            <label class="form-check-label" for="broadband">Broadband Access %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Transportation</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="long-commute" value="Pct_Commute_60_Plus">
                            <label class="form-check-label" for="long-commute">Commute 60+ Min %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="work-home" value="Pct_Work_At_Home">
                            <label class="form-check-label" for="work-home">Work from Home %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="no-vehicle" value="Pct_HH_No_Vehicle">
                            <label class="form-check-label" for="no-vehicle">No Vehicle %</label>
                        </div>
                    </div>
                </div>

                <!-- Column 3: Housing -->
                <div class="layer-column">
                    <div class="column-title">Housing</div>

                    <div class="layer-subgroup">
                        <h6>Housing Stock</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="housing-units" value="Total_Housing_Units">
                            <label class="form-check-label" for="housing-units">Total Housing Units</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="single-family" value="Pct_Single_Family">
                            <label class="form-check-label" for="single-family">Single-Family %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="multi-family" value="Pct_Multi_Family_5_Plus">
                            <label class="form-check-label" for="multi-family">Multi-Family 5+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="vacancy-rate" value="Pct_Vacant">
                            <label class="form-check-label" for="vacancy-rate">Vacancy Rate %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Values & Costs</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="home-value" value="Median_Home_Value">
                            <label class="form-check-label" for="home-value">Median Home Value</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="gross-rent" value="Median_Gross_Rent">
                            <label class="form-check-label" for="gross-rent">Median Gross Rent</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="rent-burden" value="Rent_Burden_Ratio">
                            <label class="form-check-label" for="rent-burden">Rent Burden Ratio</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="price-income" value="Price_To_Income_Ratio">
                            <label class="form-check-label" for="price-income">Price to Income Ratio</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Tenure</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="owner-pct" value="Pct_Owner_Occupied">
                            <label class="form-check-label" for="owner-pct">Owner-Occupied %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="renter-pct" value="Pct_Renter_Occupied">
                            <label class="form-check-label" for="renter-pct">Renter-Occupied %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Housing Burden</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="renter-cost-burdened" value="Pct_Renters_Cost_Burdened_30_Plus">
                            <label class="form-check-label" for="renter-cost-burdened">Rent-Burdened 30%+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="owner-cost-burdened" value="Pct_Owners_Cost_Burdened_30_Plus">
                            <label class="form-check-label" for="owner-cost-burdened">Owner Cost-Burdened 30%+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="overcrowded" value="Pct_All_HH_Overcrowded">
                            <label class="form-check-label" for="overcrowded">Overcrowded %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Density & Stability</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="density" value="housing_units_per_sqmi">
                            <label class="form-check-label" for="density">Housing Density (per sq mi)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="household-size" value="Avg_Household_Size">
                            <label class="form-check-label" for="household-size">Avg Household Size</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="owners-65-plus" value="Pct_Owners_65_Plus">
                            <label class="form-check-label" for="owners-65-plus">Owners 65+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dataLayer" id="same-house" value="Pct_Same_House_1_Year">
                            <label class="form-check-label" for="same-house">Same House 1 Year %</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- X-Axis Controls Panel -->
        <div id="xaxis-controls-panel" class="xaxis-controls-panel">
            <div class="panel-header">
                <h5>X-Axis Variable</h5>
                <button id="close-xaxis-controls" class="close-btn">&times;</button>
            </div>

            <div class="three-column-container">
                <!-- Column 1: Veterans -->
                <div class="layer-column">
                    <div class="column-title">Veterans</div>

                    <div class="layer-subgroup">
                        <h6>Ranking</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-rank" value="rank" checked>
                            <label class="form-check-label" for="x-rank">Rank (Highest to Lowest)</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Population</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-total" value="Vet_Total_Veterans">
                            <label class="form-check-label" for="x-vet-total">Total Veterans</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-pct-adult" value="Pct_Veterans_Of_Adult_Pop">
                            <label class="form-check-label" for="x-vet-pct-adult">Veterans % of Adults</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-per-1000" value="veterans_per_1000_pop">
                            <label class="form-check-label" for="x-vet-per-1000">Veterans per 1,000 Pop</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Demographics</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-male" value="Pct_Veterans_Male">
                            <label class="form-check-label" for="x-vet-male">Male Veterans %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-female" value="Pct_Veterans_Female">
                            <label class="form-check-label" for="x-vet-female">Female Veterans %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Age Groups</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-18-34" value="Pct_Veterans_18_34">
                            <label class="form-check-label" for="x-vet-18-34">Veterans 18-34 %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-35-54" value="Pct_Veterans_35_54">
                            <label class="form-check-label" for="x-vet-35-54">Veterans 35-54 %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-55-64" value="Pct_Veterans_55_64">
                            <label class="form-check-label" for="x-vet-55-64">Veterans 55-64 %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-65-plus" value="Pct_Veterans_65_Plus">
                            <label class="form-check-label" for="x-vet-65-plus">Veterans 65+ %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Economic Status</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-employed" value="Pct_Veterans_Employed">
                            <label class="form-check-label" for="x-vet-employed">Veterans Employed %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-income" value="Vet_Median_Income_Veteran_Total">
                            <label class="form-check-label" for="x-vet-income">Veteran Median Income</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vet-service-disability" value="Pct_Vet_With_Service_Disability">
                            <label class="form-check-label" for="x-vet-service-disability">Service-Connected Disability %</label>
                        </div>
                    </div>
                </div>

                <!-- Column 2: Economic Security -->
                <div class="layer-column">
                    <div class="column-title">Economic Security</div>

                    <div class="layer-subgroup">
                        <h6>Income & Poverty</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-median-income" value="Median_Household_Income">
                            <label class="form-check-label" for="x-median-income">Median Household Income</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-poverty-pct" value="Pct_Below_Poverty">
                            <label class="form-check-label" for="x-poverty-pct">Below Poverty %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-low-income" value="Low_Income_Under_35K">
                            <label class="form-check-label" for="x-low-income">Low Income (<$35K)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-high-income" value="High_Income_100K_Plus">
                            <label class="form-check-label" for="x-high-income">High Income ($100K+)</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Health Insurance</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-with-insurance" value="Pct_With_Health_Insurance">
                            <label class="form-check-label" for="x-with-insurance">With Health Insurance %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-no-insurance" value="Pct_No_Health_Insurance">
                            <label class="form-check-label" for="x-no-insurance">Without Health Insurance %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Public Assistance</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-snap" value="Pct_HH_SNAP">
                            <label class="form-check-label" for="x-snap">Households on SNAP %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-public-assist" value="Pct_HH_Public_Assistance">
                            <label class="form-check-label" for="x-public-assist">Public Assistance %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Education & Access</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-bachelors-plus" value="Pct_Bachelors_Plus">
                            <label class="form-check-label" for="x-bachelors-plus">Bachelor's Degree+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-less-than-hs" value="Pct_Less_Than_HS">
                            <label class="form-check-label" for="x-less-than-hs">Less than High School %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-disability" value="Pct_With_Disability">
                            <label class="form-check-label" for="x-disability">With Disability %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Transportation</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-long-commute" value="Pct_Commute_60_Plus">
                            <label class="form-check-label" for="x-long-commute">Commute 60+ Min %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-no-vehicle" value="Pct_HH_No_Vehicle">
                            <label class="form-check-label" for="x-no-vehicle">No Vehicle %</label>
                        </div>
                    </div>
                </div>

                <!-- Column 3: Housing -->
                <div class="layer-column">
                    <div class="column-title">Housing</div>

                    <div class="layer-subgroup">
                        <h6>Housing Stock</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-housing-units" value="Total_Housing_Units">
                            <label class="form-check-label" for="x-housing-units">Total Housing Units</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-single-family" value="Pct_Single_Family">
                            <label class="form-check-label" for="x-single-family">Single-Family %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-multi-family" value="Pct_Multi_Family_5_Plus">
                            <label class="form-check-label" for="x-multi-family">Multi-Family 5+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-vacancy-rate" value="Pct_Vacant">
                            <label class="form-check-label" for="x-vacancy-rate">Vacancy Rate %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Values & Costs</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-home-value" value="Median_Home_Value">
                            <label class="form-check-label" for="x-home-value">Median Home Value</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-gross-rent" value="Median_Gross_Rent">
                            <label class="form-check-label" for="x-gross-rent">Median Gross Rent</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Tenure & Burden</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-owner-pct" value="Pct_Owner_Occupied">
                            <label class="form-check-label" for="x-owner-pct">Owner-Occupied %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-renter-pct" value="Pct_Renter_Occupied">
                            <label class="form-check-label" for="x-renter-pct">Renter-Occupied %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-cost-burdened" value="Pct_All_HH_Cost_Burdened_30_Plus">
                            <label class="form-check-label" for="x-cost-burdened">Cost-Burdened 30%+ %</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-overcrowded" value="Pct_All_HH_Overcrowded">
                            <label class="form-check-label" for="x-overcrowded">Overcrowded %</label>
                        </div>
                    </div>

                    <div class="layer-subgroup">
                        <h6>Density & Size</h6>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-density" value="housing_units_per_sqmi">
                            <label class="form-check-label" for="x-density">Housing Density (per sq mi)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="xAxisVar" id="x-household-size" value="Avg_Household_Size">
                            <label class="form-check-label" for="x-household-size">Avg Household Size</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scatterplots Panel -->
        <div id="scatterplots-panel" class="scatterplots-panel">
            <div class="panel-header">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <h5>Scatterplot Analysis</h5>
                    <div class="info-icon-container">
                        <svg class="info-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="8" cy="8" r="7" stroke="#666" stroke-width="1.5"/>
                            <path d="M8 7V11M8 5V5.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <div class="info-tooltip">
                            <strong>How to use:</strong><br>
                            • Change X-axis using "Choose x-axis variable" button<br>
                            • Switch categories using tabs below<br>
                            • Hover over any bubble to highlight across all plots<br>
                            • Click any bubble to select that census tract
                        </div>
                    </div>
                </div>
                <button id="close-scatterplots" class="close-btn">&times;</button>
            </div>

            <!-- Category Tabs -->
            <div class="scatterplots-tabs-header">
                <button class="scatterplots-tab-btn active" data-scatter-category="veterans">Veterans</button>
                <button class="scatterplots-tab-btn" data-scatter-category="economic">Economic Security</button>
                <button class="scatterplots-tab-btn" data-scatter-category="housing">Housing</button>
            </div>

            <div class="scatterplots-grid">
                <!-- Scatter plots will be dynamically created here -->
            </div>
        </div>

        <!-- Map Container -->
        <div id="map" class="map-container"></div>
        
        <!-- Legend -->
        <div class="legend" id="legend">
            <div class="legend-title">Legend</div>
            <div id="legend-content"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>